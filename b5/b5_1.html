<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>
<body>
<div><label><strong><h3>Add New Product</h3></strong></label></div>
<!--<div>-->
<!--    <label for="id">ID</label>-->
<!--    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="id" type="number"/>-->
<!--</div>-->
<div style="background-color:#d2eae3">
    <label for="name">NAME</label>
    <input id="name" type="text" placeholder="New Product"/>
    <button type="button" class="btn btn-primary" id="input" onclick="add()">Add</button>
</div>
<br>
<div><strong>Display All Product</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label
        id="count" style="color: red"></label>
</div>
<br>
<div>
    <table class="table table-striped" id="render">

    </table>
</div>
</body>
</html>
<script>

    var data = [{
        ID: 1,
        NAME: "quyet79"
    },
        {
            ID: 2,
            NAME: "quyet79"
        },
        {
            ID: 3,
            NAME: "quyet79"
        },
        {
            ID: 4,
            NAME: "quyet79"
        },
        {
            ID: 5,
            NAME: "quyet79"
        }]

    render()



    function add() {
        // var item_id = document.getElementById("id").value;
        var item_name = document.getElementById("name").value;
        console.log(data.length)
        // for (let i = 1; i < data.length + 2; i++) {
        //     var item = {
        //         ID: i,
        //         NAME: item_name,
        //     }
        //     console.log("id:" + i)
        // }
        //
        // let index = data.findIndex((c) => c.ID == item.ID)
        // console.log(item.ID)
        // console.log("index" + index)
        // if (index >= 0) {
        //     data.splice(index, 1, item)
        // } else {
        //     console.log(index);
        //     data.push(item);
        // }
        data[data.length] = {ID:(data.length+1), NAME: item_name}
        document.getElementById("count").innerText = data.length + " " + "Product";
        render();
        clear();
        console.log(data);
    }

    function render() {
        table = `<tr>
<!--                <th>ID</th>-->
                <th>NAME</th>
                <th></th>
                <th></th>
            </tr>`
        for (let i = 0; i < data.length; i++) {
            table += `<tr>
                <td>${data[i].NAME}</td>
                <td><button  class="btn btn-primary" onclick=deleteItem(${data[i].ID})>Delete</button></td>
                <td><button class="btn btn-primary" onclick=editItem(${data[i].ID})>Edit</button></td>
            </tr>`
        }
        document.getElementById("render").innerHTML = table;
        document.getElementById("count").innerText = data.length + " " + "Product";

    }

    function clear() {
        document.getElementById("name").value = ""
    }

    function deleteItem(id) {
        for (let i = 0; i < data.length; i++) {
            if (data[i].ID == id) {
                data.splice(i, 1);
                render();
            }
        }
    }
    let index
    function editItem(id) {
        for (let i = 0; i < data.length; i++) {
            if (data[i].ID === id) {
                index = data[i].ID
                document.getElementById("name").value = data[i].NAME
                document.getElementById("input").setAttribute("onclick","edit()");
            }
        }
    }



    function edit() {
        let name = document.getElementById("name").value
        for (let i = 0; i < data.length; i++) {
            if (data[i].ID === index) {
                data[i].NAME = name
            }
        }
        render()
        clear()
    }
</script>